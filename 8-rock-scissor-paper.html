<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    body{
      box-sizing: border-box;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Roboto', monospace;
      text-align: center;
      color: white;
      background-color: #161616;
    }
    h1{
      margin: 0;
    }
    .wrapper{
      margin-top: 150px;
      padding: 30px 60px;
      border-radius: 12px;
      background-color: #272727;
      font-weight: 700;

      .turn{
        font-size: 96px;
        background-color: #2b2b2b;
        border: 0cap solid rgb(6, 6, 6);
        border-radius: 50%;
        padding: 30px 45px;
        transition: all 0.1s ease-in-out;
        display: inline-block;
        &:hover{
          background-color: #212121;
          border: 1px solid rgb(15, 15, 15);
          box-shadow: 0px 0px 10px rgba(0,0,0,0.3);
        }
        &:active{
          background-color: #1b1b1b;
        }
      }

      button{
        color: white;
        background-color: #3a3a3a;
        border: none;
        border-radius: 6px;
        margin-block: 5px;
        padding: 8px 12px;
        display: inline-block;

        &:hover{
          background-color: #212121;
        }
        &:active{
          background-color: #1b1b1b;
        }
      }
    }
  </style>
</head>
<body>


  <div class="wrapper">
    <h1>Rock paper scissor</h1>
    <div class="btns">
      <button class="turn js-button-scissor">‚úåÔ∏è</button>

      <button class="turn js-button-rock">‚úä</button>

      <button class="turn js-button-paper">ü´≤</button>

    </div>
    <button class="js-button-reset">Reset score</button>
    <button
      onclick="
        
        autoPlay()
      "
      
    >
      Autoplay
    </button>

    <p class="js-score"></p>
    <p class="js-win"></p>
    <p class="js-choose"></p>

  </div>


  

  <script>  
    let myChoose;
    let computer;
    let result;
    let randNumber;
    const chooseElement = document.querySelector(['.js-choose']);
    const scoreElement = document.querySelector(['.js-score']);
    const winLoseElement = document.querySelector(['.js-win']);
    
    const rockButton = document.querySelector(['.js-button-rock']);
    const scissorButton = document.querySelector(['.js-button-scissor']);
    const paperButton = document.querySelector(['.js-button-paper']);
    const resetButton = document.querySelector(['.js-button-reset']);
    
    let moveIcon;
    let autoPlaying = false;
    let intervalID;
    
    savedData = localStorage.getItem(`score`);
    
    let score =  JSON.parse(savedData) || {
      wins: 0,
      loses: 0,
      tie: 0
    }
    
    rockButton.addEventListener('click', () => play('Rock'))
    scissorButton.addEventListener('click', () => play('Scissor'))
    paperButton.addEventListener('click', () => play('Paper'))
    resetButton.addEventListener('click', () => {
      score.wins = 0;
      score.loses = 0;
      score.tie = 0;

      chooseElement.innerText = null;
      winLoseElement.innerText = null;
      
      localStorage.removeItem('score');
      updateScore();

      console.log(score);
    })

    document.body.addEventListener('keydown', (event) => {
      console.log(event.key)
      if (event.key === 'r'){
        play('Rock');
      } else if(event.key === 's'){
        play('Scissor')
      } else if (event.key === 'p'){
        play('Paper')
      }
    })




    function autoPlay(){
      if(!autoPlaying){
          intervalID = setInterval(function(){
          playerChoose = getRandChoice()
          play(playerChoose)
        }, 1000);
        autoPlaying = true;
      } else{
         clearInterval(intervalID)
         autoPlaying = false;
      }
      
    }

    
    
    updateScore();

    function iconFinder(move){
      if (move === 'Scissor') {
        return '‚úåÔ∏è';
      } else if (move === 'Rock') {
        return '‚úä'
      } else if (move === 'Paper') {
        return 'ü´≤'
      }
    }

    
    function updateScore(){
      scoreElement.innerText = `wins: ${score.wins} loses: ${score.loses} tie: ${score.tie}`;
    }

    function choose(){
      chooseElement.innerText = `You  ${iconFinder(myChoose)} - ${iconFinder(computer)} Computer`;
    }
    
    function winLose(){
      winLoseElement.innerText = `${result}!`;
    }

    function lose(){
      score.loses += 1;
      result = 'You lose';
    }

    function win(){
      score.wins += 1;
      result = 'You won';
    }

    function play(playerChoose){
      myChoose = playerChoose;
      computer = getRandChoice();
      if (myChoose === computer){
        score.tie += 1;
        result = 'Tie';
      } else if (myChoose === 'Scissor') {
        if (computer === 'Rock') {
          lose();
        } else {
          win()
        }
      } else if (myChoose === 'Rock') {
        if (computer === 'Paper') {
          lose();
        } else {
          win();
        }
      } else if (myChoose === 'Paper'){
        if (computer === 'Rock') {
          lose();
        } else {
          win();
        }
      }
      localStorage.setItem(`score`, JSON.stringify(score));
      winLose();
      choose();
      updateScore();
    }

    /*function saveData(){
      return localStorage.setItem(`score`, JSON.stringify(score));
    }*/

    function getRandChoice() {
      randNumber = Math.random();
      if (randNumber > 0 && randNumber < 1/3) {
        return 'Rock';
      } else if (randNumber < 2/3) {
        return 'Paper';
      } else {
        return 'Scissor';
      }
    }

  </script>
  
</body>
</html>